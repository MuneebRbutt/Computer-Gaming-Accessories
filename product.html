<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product - Advance IT Traders</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { theme: { extend: { colors: { brand: { DEFAULT: '#0ea5e9', dark: '#0b84b6' }, surface: '#0f172a', card: '#111827' } }, fontFamily: { sans: ['Poppins','ui-sans-serif','system-ui','Segoe UI','Roboto'] } } };
    </script>
</head>
<body class="bg-surface text-gray-100 font-sans">
    <header class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
        <a href="index.html" class="text-sm text-brand hover:underline">← Back to Home</a>
        <a href="#cart" class="text-sm hover:text-brand">Cart (<span id="cartCount">0</span>)</a>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
            <!-- Image / Carousel -->
            <div class="relative">
                <button id="galPrev" class="absolute left-2 top-1/2 -translate-y-1/2 z-10 p-2 rounded-md bg-black/50 border border-gray-800 hover:border-brand">‹</button>
                <button id="galNext" class="absolute right-2 top-1/2 -translate-y-1/2 z-10 p-2 rounded-md bg-black/50 border border-gray-800 hover:border-brand">›</button>
                <div id="pImage" class="bg-card border border-gray-800 rounded-lg aspect-[4/3] bg-center bg-cover"></div>
            </div>
            <div id="pGallery" class="mt-3 grid grid-cols-5 gap-2"></div>
        </div>
        <div>
            <div class="flex items-start justify-between gap-3">
                <h1 id="pTitle" class="text-2xl font-semibold">Product Title</h1>
                <span id="pAvailability" class="px-2 py-1 text-xs rounded-md border border-gray-700">In Stock</span>
            </div>
            <div class="mt-2 text-brand font-semibold text-xl" id="pPrice">Rs 0</div>
            <div id="pMeta" class="mt-1 text-xs text-gray-400">Category • Brand</div>
            <p id="pDesc" class="mt-4 text-gray-300 text-sm">This is a placeholder product detail page. Integrate with your product data to populate title, price, description, and images.</p>
            <div class="mt-6 flex gap-3">
                <button id="addToCart" class="px-5 py-2 bg-brand text-black rounded-md font-semibold hover:bg-brand-dark">Add to Cart</button>
                <a id="buyNow" href="#" class="px-5 py-2 border border-gray-700 rounded-md hover:border-brand">Buy Now</a>
            </div>

            <!-- Technical Specs -->
            <div class="mt-8">
                <h2 class="text-lg font-semibold mb-3">Technical Specifications</h2>
                <div class="overflow-hidden rounded-lg border border-gray-800">
                    <table class="w-full text-sm">
                        <tbody id="pSpecs"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <section class="max-w-6xl mx-auto px-4 pb-12">
        <h2 class="text-xl font-semibold mb-4">Reviews</h2>
        <div class="bg-card border border-gray-800 rounded-lg p-4 md:p-5">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <div id="avgRating" class="text-lg">0.0</div>
                    <div id="avgStars" class="text-yellow-400">★★★★★</div>
                    <div id="reviewCount" class="text-xs text-gray-400">(0 reviews)</div>
                </div>
            </div>
            <div id="reviewsList" class="mt-4 space-y-3"></div>
            <form id="reviewForm" class="mt-6 grid gap-3">
                <div class="flex items-center gap-3">
                    <label class="text-sm">Your Rating</label>
                    <div id="ratingInputs" class="flex items-center gap-1 text-yellow-400 cursor-pointer select-none"></div>
                </div>
                <textarea id="reviewText" rows="3" placeholder="Share your thoughts about the product" class="w-full bg-black/40 border border-gray-700 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"></textarea>
                <button class="px-4 py-2 bg-brand text-black rounded-md text-sm font-semibold w-max">Submit Review</button>
            </form>
        </div>
    </section>

    <footer class="border-t border-gray-800 py-6 text-center text-xs text-gray-400">© <span id="year"></span> Advance IT Traders</footer>

    <script>
        const CART_KEY = 'ait-cart-count';
        function getCartCount() {
            const n = Number(localStorage.getItem(CART_KEY) || '0');
            return isNaN(n) ? 0 : n;
        }
        function setCartCount(n) {
            localStorage.setItem(CART_KEY, String(n));
            document.getElementById('cartCount').textContent = String(n);
        }
        function incCart() {
            setCartCount(getCartCount() + 1);
            alert('Added to cart (placeholder).');
        }

        // Product dataset (extended to match shop)
        const PRODUCTS = {
            'laptop4060': {
                title: 'Gaming Laptop 15" RTX 4060',
                price: 345000,
                desc: 'High-FPS 1080p/1440p gaming laptop with RTX 4060.',
                image: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=2070&auto=format&fit=crop',
                category: 'Laptop',
                brand: 'MSI',
                availability: 'In Stock',
                specs: { CPU: 'Intel Core i7', GPU: 'NVIDIA RTX 4060', RAM: '16GB DDR5', Storage: '1TB NVMe SSD', Display: '15.6" 144Hz' },
                gallery: [
                    'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=2070&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1200&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1000&auto=format&fit=crop'
                ]
            },
            'pc-ryzen7': {
                title: 'Custom Gaming PC Ryzen 7',
                price: 280000,
                desc: 'Ryzen 7 + RTX performance for streaming and gaming.',
                image: 'https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=2069&auto=format&fit=crop',
                category: 'Desktop',
                brand: 'AMD',
                availability: 'Limited Stock',
                specs: { CPU: 'Ryzen 7 5800X', GPU: 'NVIDIA RTX 4070', RAM: '32GB DDR4', Storage: '1TB NVMe + 2TB HDD', Cooling: '240mm AIO' },
                gallery: [
                    'https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=2069&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=2069&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1512428559087-560fa5ceab42?q=80&w=2069&auto=format&fit=crop'
                ]
            },
            'kb-rgb': {
                title: 'RGB Mechanical Keyboard',
                price: 12500,
                desc: 'Tactile switches, per-key RGB, detachable cable.',
                image: 'https://images.unsplash.com/photo-1595044426077-d36a40f253d3?q=80&w=2070&auto=format&fit=crop',
                category: 'Keyboard',
                brand: 'Razer',
                availability: 'In Stock',
                specs: { Switches: 'Tactile', Layout: 'ANSI', Connection: 'USB-C', RGB: 'Per-key', Software: 'Supported' },
                gallery: [
                    'https://images.unsplash.com/photo-1595044426077-d36a40f253d3?q=80&w=2070&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1200&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1511715281310-7ff014df43a2?q=80&w=1200&auto=format&fit=crop'
                ]
            },
            'headset-71': {
                title: 'Gaming Headset 7.1 Surround',
                price: 9800,
                desc: 'Immersive virtual surround with noise-cancelling mic.',
                image: 'https://images.unsplash.com/photo-1511715281310-7ff014df43a2?q=80&w=2069&auto=format&fit=crop',
                category: 'Headset',
                brand: 'HyperX',
                availability: 'In Stock',
                specs: { Sound: '7.1 Virtual Surround', Mic: 'Noise-cancelling', Connection: 'USB', Weight: '275g' },
                gallery: [
                    'https://images.unsplash.com/photo-1511715281310-7ff014df43a2?q=80&w=2069&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1552932774-4dc0d7c1d5ae?q=80&w=2069&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1200&auto=format&fit=crop'
                ]
            },
            'mouse-wireless': {
                title: 'Wireless Gaming Mouse',
                price: 6500,
                desc: 'Lightweight wireless mouse with precise sensor.',
                image: 'https://images.unsplash.com/photo-1584270354949-c26b0d5b07e7?q=80&w=1200&auto=format&fit=crop',
                category: 'Mouse',
                brand: 'Logitech',
                availability: 'In Stock',
                specs: { Sensor: 'Hero', DPI: '12,000', Weight: '85g', Battery: '200 hours' },
                gallery: [
                    'https://images.unsplash.com/photo-1584270354949-c26b0d5b07e7?q=80&w=1200&auto=format&fit=crop'
                ]
            },
            'monitor-27-165': {
                title: '27" 165Hz Gaming Monitor',
                price: 62000,
                desc: 'Fast 165Hz IPS panel for smooth gameplay.',
                image: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1200&auto=format&fit=crop',
                category: 'Monitor',
                brand: 'Dell',
                availability: 'Preorder',
                specs: { Size: '27"', Panel: 'IPS', Refresh: '165Hz', Resolution: '1440p' },
                gallery: [
                    'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1200&auto=format&fit=crop'
                ]
            },
            'ssd-1tb': {
                title: 'NVMe SSD 1TB',
                price: 18500,
                desc: 'Blazing fast NVMe SSD for OS and games.',
                image: 'https://images.unsplash.com/photo-1611695434369-5c6e61bbee04?q=80&w=1200&auto=format&fit=crop',
                category: 'Storage',
                brand: 'Samsung',
                availability: 'In Stock',
                specs: { Interface: 'PCIe 3.0 x4', Read: '3500 MB/s', Write: '3000 MB/s' },
                gallery: [
                    'https://images.unsplash.com/photo-1611695434369-5c6e61bbee04?q=80&w=1200&auto=format&fit=crop'
                ]
            },
            'cpu-cooler': {
                title: 'ARGB CPU Liquid Cooler',
                price: 14500,
                desc: 'Quiet cooling with addressable RGB.',
                image: 'https://images.unsplash.com/photo-1561154464-82e9adf32764?q=80&w=1200&auto=format&fit=crop',
                category: 'Cooler',
                brand: 'CoolerMaster',
                availability: 'In Stock',
                specs: { Radiator: '240mm', Fans: '2x120mm ARGB', Socket: 'AM4/LGA1700', Warranty: '2 Years' },
                gallery: [
                    'https://images.unsplash.com/photo-1561154464-82e9adf32764?q=80&w=1200&auto=format&fit=crop'
                ]
            }
        };
        function formatPKR(n){ return 'Rs ' + Number(n).toLocaleString('en-PK'); }
        function initProduct() {
            const params = new URLSearchParams(location.search);
            const sku = params.get('sku');
            const data = PRODUCTS[sku] || { title: 'Product Title', price: 0, desc: document.getElementById('pDesc').textContent, image: 'https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=2070&auto=format&fit=crop', gallery: [], category: 'Misc', brand: 'Generic', availability: 'In Stock', specs: {} };
            document.getElementById('pTitle').textContent = data.title;
            document.getElementById('pPrice').textContent = formatPKR(data.price);
            document.getElementById('pDesc').textContent = data.desc;
            document.getElementById('pMeta').textContent = `${data.category} • ${data.brand}`;
            const avail = document.getElementById('pAvailability');
            avail.textContent = data.availability;
            avail.className = 'px-2 py-1 text-xs rounded-md border ' + (data.availability === 'In Stock' ? 'border-green-600 text-green-400' : data.availability === 'Limited Stock' ? 'border-yellow-600 text-yellow-400' : 'border-gray-600 text-gray-300');
            // set main image
            const hero = document.getElementById('pImage');
            hero.style.backgroundImage = `url('${data.image}')`;
            // render gallery
            const gal = document.getElementById('pGallery');
            gal.innerHTML = '';
            const allImages = (data.gallery && data.gallery.length ? data.gallery : [data.image]);
            let activeIndex = 0;
            function setActive(i){
                activeIndex = (i + allImages.length) % allImages.length;
                hero.style.backgroundImage = `url('${allImages[activeIndex]}')`;
                Array.from(gal.children).forEach((btn, idx)=>{
                    btn.classList.toggle('ring-2', idx===activeIndex);
                    btn.classList.toggle('ring-brand', idx===activeIndex);
                });
            }
            allImages.forEach((src, idx) => {
                const btn = document.createElement('button');
                btn.className = 'aspect-[4/3] rounded-md overflow-hidden border border-gray-800 hover:border-brand';
                btn.innerHTML = `<div class="w-full h-full bg-center bg-cover" style="background-image:url('${src}')"></div>`;
                btn.addEventListener('click', () => setActive(idx));
                gal.appendChild(btn);
            });
            document.getElementById('galPrev').addEventListener('click', ()=> setActive(activeIndex-1));
            document.getElementById('galNext').addEventListener('click', ()=> setActive(activeIndex+1));
            setActive(0);

            // specs table
            const specsBody = document.getElementById('pSpecs');
            specsBody.innerHTML = '';
            Object.entries(data.specs || {}).forEach(([k,v], i) => {
                const tr = document.createElement('tr');
                tr.className = i % 2 === 0 ? 'bg-black/20' : '';
                tr.innerHTML = `<td class="px-4 py-2 w-40 text-gray-400">${k}</td><td class="px-4 py-2">${v}</td>`;
                specsBody.appendChild(tr);
            });

            // reviews
            initReviews(sku);
        }

        document.getElementById('addToCart')?.addEventListener('click', incCart);
        document.getElementById('year').textContent = new Date().getFullYear();
        // Initialize
        setCartCount(getCartCount());
        initProduct();

        // --------- Reviews (localStorage) ---------
        function getReviewKey(sku){ return `ait-reviews-${sku}`; }
        function loadReviews(sku){
            try { return JSON.parse(localStorage.getItem(getReviewKey(sku))||'[]'); } catch { return []; }
        }
        function saveReviews(sku, list){
            localStorage.setItem(getReviewKey(sku), JSON.stringify(list));
        }
        function renderStars(n){
            const full = Math.round(n);
            return '★★★★★'.split('').map((s,i)=> i < full ? '★' : '☆').join('');
        }
        function initReviews(sku){
            const listEl = document.getElementById('reviewsList');
            const avgEl = document.getElementById('avgRating');
            const avgStarsEl = document.getElementById('avgStars');
            const countEl = document.getElementById('reviewCount');
            const form = document.getElementById('reviewForm');
            const text = document.getElementById('reviewText');
            const ratingInputs = document.getElementById('ratingInputs');

            let rating = 5;
            function drawRatingInputs(){
                ratingInputs.innerHTML = '';
                for (let i=1;i<=5;i++){
                    const btn = document.createElement('button');
                    btn.type = 'button';
                    btn.className = 'text-lg';
                    btn.textContent = i <= rating ? '★' : '☆';
                    btn.addEventListener('click', ()=>{ rating = i; drawRatingInputs(); });
                    ratingInputs.appendChild(btn);
                }
            }
            drawRatingInputs();

            function render(){
                const data = loadReviews(sku);
                listEl.innerHTML = data.map(r => `
                    <div class="border border-gray-800 rounded-md p-3">
                        <div class="flex items-center justify-between">
                            <div class="text-yellow-400">${renderStars(r.rating)}</div>
                            <div class="text-xs text-gray-500">${new Date(r.time).toLocaleString()}</div>
                        </div>
                        <div class="mt-2 text-sm">${r.text ? r.text.replace(/</g,'&lt;') : ''}</div>
                    </div>
                `).join('');
                const avg = data.length ? (data.reduce((a,b)=>a+b.rating,0)/data.length) : 0;
                avgEl.textContent = avg.toFixed(1);
                avgStarsEl.textContent = renderStars(avg);
                countEl.textContent = `(${data.length} reviews)`;
            }
            render();

            form.addEventListener('submit', (e)=>{
                e.preventDefault();
                const txt = text.value.trim();
                const data = loadReviews(sku);
                data.unshift({ rating, text: txt, time: Date.now() });
                saveReviews(sku, data);
                text.value = '';
                rating = 5; drawRatingInputs();
                render();
            });
        }
    </script>
</body>
</html>


